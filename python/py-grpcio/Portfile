# -*- coding: utf-8; mode: _tcl; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- vim:fenc=utf-8:ft=tcl:et:sw=2:ts=2:sts=2

PortSystem          1.0
PortGroup           python 1.0

name                py-grpcio
version             1.10.0
platforms           darwin
license             Apache-2
maintainers         {@emcrisostomo gmail.com:enrico.m.crisostomo} openmaintainer

description         HTTP/2-based RPC framework
long_description    ${description}

homepage            https://grpc.io/

if {${python.version} eq 27} {
    master_sites        https://pypi.python.org/packages/63/92/f562c3276a2cd5e4cca91e6f395fd504c56c74147856529575b1129b4535
    distname            grpcio-${version}-cp${python.version}-cp${python.version}m-macosx_10_11_x86_64

    checksums           rmd160 bbc2e05b59d7996bbb4fe9f82679c3732566959f \
sha256 a1bc37c9910d0fbf4d9e80d5822f92c6e01e28dd1eb01323636ed19666b537cb \
size   1496422
} elseif {${python.version} eq 35} {
    master_sites        https://pypi.python.org/packages/92/cb/4a1759a15ad86d735ea3af1077b6800a157e9a8a74f8a1ff0bdd8e10077c
    distname            grpcio-${version}-cp${python.version}-cp${python.version}m-macosx_10_7_intel

    checksums           rmd160 bc1e4008084fdd1802b59b69adc5d63f2410bb3a \
sha256 d9e3105f6de6cb759b028702bdd21cb36d27e010227669e43c675b9957a3c180 \
size   1663723
} elseif {${python.version} eq 36} {
    master_sites        https://pypi.python.org/packages/70/e6/8dcf5585e468a0ec976cbfc6dd5a6ee0853e2bf405b464f81665f531e9ba
    distname            grpcio-${version}-cp${python.version}-cp${python.version}m-macosx_10_11_x86_64

    checksums           rmd160 747f98dd0937216fcf6ca59d9f085104263ba3f8 \
sha256 1bc36e512741f82c1d73f42df536aa2ab75d840f0d35c149b5d0bee1aed16862 \
size   1489573
}

extract.suffix      .whl

extract {
}

python.versions     27 35 36

if {${name} ne ${subport}} {
    depends_build-append \
        port:py${python.version}-pip

    depends_lib-append \
        port:py${python.version}-protobuf3 \
        port:py${python.version}-six \
        port:py${python.version}-wheel

    if {${python.version} < 34} {
        depends_lib-append \
            port:py${python.version}-enum34 \
            port:py${python.version}-futures
    }

    build {
    }

    destroot.cmd        pip-${python.branch}
    destroot.args       \
        --no-cache-dir \
        --no-dependencies \
        --root ${destroot} \
        ${distpath}/${distfiles}
    destroot.post_args

    livecheck.type      none
} else {
    livecheck.type      pypi
}
