# -*- coding: utf-8; mode: _tcl; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- vim:fenc=utf-8:ft=tcl:et:sw=2:ts=2:sts=2

PortSystem          1.0
PortGroup           github 1.0
PortGroup user 1.0

name                kvazaar
github.setup        gaming-hacker kvazaar 75fec2927a4ad8b327f800d5ac30ff3d1f8ceca8
version             20180414
revision            0
fetch.type          git

license             LGPL-2.1+
categories          multimedia
maintainers         nomaintainer

description          An open-source HEVC encoder.

long_description    ${description} licensed under LGPLv2.1 \
Kvazaar is still under development. Speed and RD-quality \
will continue to improve.

platforms           darwin
homepage            http://ultravideo.cs.tut.fi/

depends_build       port:pkgconfig \
                    port:gmake

use_configure yes

build.cmd      ./autogen.sh
build.target ""
build.args ""
build.pre_args      {}

use_autoreconf      yes
autoreconf.args     -fiv

# pre-configure { system#  -W ${worksrcpath} "./autogen.sh" }

configure.optflags  -O3 -pipe -m64 -arch x86_64 \
                    -march=native -mtune=native  \
                    -mmacosx-version-min=10.12 \
                    -fomit-frame-pointer -fno-common \
                    -mavx2 -mfma -mfpmath=sse \
                    -msse2 -msse3 -msse4.1 -msse4.2 \
                    -Wno-unknown-warning-option \
                    -Wno-unused-function \
                    -Wno-unused-variable \
                    -Wno-unused-command-line-argument \
                    -l1-cache-line-size=64 \
                    -l1-cache-size=32 \
                    -l2-cache-size=256

configure.cflags    -std=c11
configure.cxxflags  -std=c++17
configure.args      --enable-static \
                    --disable-shared \
                    --disable-dependency-tracking \
                    --enable-fast-install \
                    --enable-asm \
                    --with-pic \
                    --prefix=${prefix}

test.run            no

livecheck.type      none
