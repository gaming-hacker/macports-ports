# -*- coding: utf-8; mode: _tcl; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- vim:fenc=utf-8:ft=tcl:et:sw=2:ts=2:sts=2

PortSystem      1.0

name            xorg-libxcb
version         1.13.1
revision        2
categories      x11 devel
license         X11
maintainers     {jeremyhu @jeremyhu} openmaintainer
description     X.org libxcb
homepage        http://xcb.freedesktop.org/
platforms       darwin macosx
long_description The X C Binding (XCB) library
master_sites     ${homepage}dist/

distname        libxcb-${version}

checksums       rmd160  9b648a6450eba2f43407252e4ec7f6d5eb1b6e2e \
sha256  a89fb7af7a11f43d2ce84a844a4b38df688c092bf4b67683aef179cdf2a647c4 \
size    506778

use_bzip2       yes
use_parallel_build yes

depends_build   port:pkgconfig

depends_lib     port:xorg-libXau \
                port:xorg-libXdmcp \
                port:xorg-xcb-proto \
                port:xorg-libpthread-stubs

configure.args  --disable-build-docs

variant docs description "Install extra documentation" {
    depends_build-append \
        port:doxygen \
        path:bin/dot:graphviz

    depends_skip_archcheck-append \
        doxygen

    configure.args-delete \
        --disable-build-docs

    configure.args-append \
        --enable-build-docs

    configure.env-append \
        DOXYGEN="${prefix}/bin/doxygen"
}

variant python37 conflicts description {Use python 3.7} {
    depends_run-append      port:python37
    configure.python        ${prefix}/bin/python3.7
}

if {![variant_isset python37]} {
    default_variants +python37
}

livecheck.type  regex
livecheck.url   ${master_sites}?C=M&O=D
livecheck.regex libxcb-(\\d+(?:\\.\\d+)*)
