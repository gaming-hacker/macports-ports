# -*- coding: utf-8; mode: _tcl; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- vim:fenc=utf-8:ft=tcl:et:sw=2:ts=2:sts=2

PortSystem 1.0
PortGroup  github 1.0
PortGroup  cxx11 1.1

github.setup    grpc grpc 1.9.1 v
categories      devel
maintainers     nomaintainer
license         Apache-2
description     A high performance, open-source universal RPC framework.
homepage        https://grpc.io
platforms       darwin

long_description \
    Remote Procedure Calls (RPCs) provide a useful abstraction \
    for building distributed applications and services. The \
    libraries in this repository provide a concrete \
    implementation of the gRPC protocol, layered over HTTP/2. \
    These libraries enable communication between clients and \
    servers using any combination of the supported languages.

checksums       rmd160  90709202459e8bfd71762ac3cafd85fe503b10d4 \
                sha256  43c1e96886d6ee3fbb2978f645400a92df989d37c80f2408f6730cfc1e05875b

patchfiles patch-Makefile.diff

depends_lib-append \
    port:zlib \
    port:protobuf3-cpp \
    port:c-ares \
    port:openssl

depends_build-append \
    port:pkgconfig \
    port:autoconf \
    port:automake \
    port:libtool

use_configure no

# grpc/INSTALL.md recommends setting libtool env vars for make
build.env-append LIBTOOL=glibtool LIBTOOLIZE=glibtoolize
build.args-append \
    CC="${configure.cc}" \
    CXX="${configure.cxx}" \
    LDLIBSXX=-stdlib=${configure.cxx_stdlib} \
    prefix="${prefix}"

destroot.args-append prefix=${destroot}${prefix}
