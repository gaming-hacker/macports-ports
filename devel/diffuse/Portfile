# -*- coding: utf-8; mode: _tcl; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -\*- vim:fenc=utf-8:ft=tcl:et:sw=2:ts=2:sts=2
PortSystem	1.0

name                diffuse
version             0.4.8
categories          devel
platforms           darwin
maintainers         nomaintainer
license             GPL-2+
supported_archs     noarch

description         diffuse is a graphical diffing and merging tool
long_description    Diffuse is a small and simple text merge tool \
                    written in Python. With Diffuse, you can easily \
                    merge, edit, and review changes to your code.

homepage            http://diffuse.sourceforge.net
master_sites        sourceforge

checksums           sha1    473f7e82f57cc3a5ce0378eea8aede19a3f2a9df \
sha256  c1d3b79bba9352fcb9aa4003537d3fece248fb824781c5e21f3fcccafd42df2b \
rmd160  c424ba8e48a86d0eeab2b51b15bb6f81dd23e95d

use_bzip2           yes

set pythonexec ""


variant python37 description {Use python37} {
    depends_lib-append    port:py37-pygtk
    set pythonexec        ${prefix}/bin/python3.7
}

default_variants +python37


use_configure       no

post-patch {
    reinplace "s|/usr/bin/env python|${pythonexec}|g" \
        ${worksrcpath}/src/usr/bin/diffuse
}

build {}

destroot {
    system "cd ${worksrcpath} && ${pythonexec} \
       ./install.py \
       --prefix=${prefix} \
       --destdir=${destroot} \
       --sysconfdir=${prefix}/etc"
}
