# -*- coding: utf-8; mode: _tcl; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- vim:fenc=utf-8:ft=tcl:et:sw=2:ts=2:sts=2

PortSystem 1.0

name		android
version 3859397

categories	  java devel emulators
maintainers	  nomaintainer
license		    Apache-2
platforms	    darwin
description	    Android SDK
long_description  The Android SDK allows development \
                  for the Android mobile platform.
supported_archs	    noarch

set sdk	    sdk-tools-darwin-${version}.zip

homepage	     https://developer.android.com/
master_sites	https://dl.google.com/android/repository

use_zip yes
extract.mkdir     yes

worksrcdir    android-sdk-${version}
distname      sdk-tools-darwin-${version}

checksums   sha256  4a81754a760fce88cba74d69c364b05b31c53d57b26f9f82355c61d5fe4b9df9 \
size    86182133 \
 rmd160  f2348a9afaf1ad2fd3f9f467f55ef7082de92e26

use_configure	    no
build.cmd	    true

destroot.keepdirs						\
    ${destroot}${prefix}/share/java/${worksrcdir}/add-ons	\
    ${destroot}${prefix}/share/java/${worksrcdir}/docs		\
    ${destroot}${prefix}/share/java/${worksrcdir}/platforms	\
    ${destroot}${prefix}/share/java/${worksrcdir}/samples	\
    ${destroot}${prefix}/share/java/${worksrcdir}/temp

post-extract {
	system "unzip -q ${distpath}/${distname} -d ${workpath}"
}

destroot {
    xinstall -m 755 -d ${destroot}${prefix}/share/java/${distname}

    # file copy can not copy with rename and directory tree.
    #
    system "cp -r ${worksrcpath}/. ${destroot}${prefix}/share/java/${distname}/."

    xinstall -m 770 -d ${destroot}${prefix}/share/java/${distname}/docs
    xinstall -m 770 -d ${destroot}${prefix}/share/java/${distname}/samples
    xinstall -m 770 -d ${destroot}${prefix}/share/java/${distname}/temp

    system "
	chgrp -R _developer ${destroot}${prefix}/share/java/${distname};
	chmod -R g+w ${destroot}${prefix}/share/java/${distname};
    "

    ui_info "####################################################################"
    ui_info "# add-ons, docs, platforms, samples and temp have been made	#"
    ui_info "# group _developer writable. You need to be member of the		#"
    ui_info "# _developer group to use the android tools. If you are not use:	#"
    ui_info "#									#"
    ui_info "# sudo dscl . append /Groups/_developer GroupMembership <username> #"
    ui_info "####################################################################"
    ui_info "# you need to download the actual SDKs. Because of the licence	#"
    ui_info "# querys this can not be done automaticaly. Use:			#"
    ui_info "#									#"
    ui_info "# @PREFIX@/share/java/android-sdk-macosx/tools/android update sdk	#"
    ui_info "####################################################################"
}
notes "
${distname} has been made group _developer writable
set ANDROID_SDK to ${prefix}/share/java/sdk-tools-darwin-${version}??
"

livecheck.type      none
