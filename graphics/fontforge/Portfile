# -*- coding: utf-8; mode: _tcl; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- vim:fenc=utf-8:filetype=tcl:et:sw=2:ts=2:sts=2

PortSystem          1.0
PortGroup           github 1.0

name                fontforge
github.setup        fontforge fontforge 20170731
github.tarball_from releases
use_xz              yes
distname            ${name}-dist-${version}
#revision            1
categories          graphics fonts
platforms           darwin
maintainers         nomaintainer
license             BSD
description         Outline and bitmap font editor/converter for many formats

long_description    FontForge allows you to edit outline and bitmap fonts.  You may create \
                    new ones or modify old ones.  It is also a format converter and can \
                    interconvert between PostScript (ascii & binary Type1, some Type3, \
                    some Type0), TrueType, OpenType (Type2), CID, SVG.  Previously known as \
                    pfaedit.

homepage            http://fontforge.github.io/

checksums           rmd160  af473f403999937dd95715bdfd98f582d05c94cd \
sha256  840adefbedd1717e6b70b33ad1e7f2b116678fa6a3d52d45316793b9fd808822 \
size    13985256

worksrcdir          ${name}-2.0.${version}

patchfiles          include.patch

if {${os.platform} eq "darwin" && ${os.major} > 9} {
    patchfiles-append \
                    require_noerr.patch
}

depends_build       port:pkgconfig

depends_lib         port:freetype \
                    port:gettext \
                    port:giflib \
                    port:jpeg \
                    port:libiconv \
                    port:libpng \
                    port:libuninameslist \
                    port:libxml2 \
                    port:tiff \
                    port:zlib \
                    port:libspiro \
                    port:pango \
                    port:cairo

configure.args      --mandir=${prefix}/share/man \
                    --disable-python-scripting \
                    --disable-python-extension \
                    --without-x

configure.ldflags-append \
                    -lintl

variant python27 description {Enable Python support (Python 2.7)} {
    depends_lib-append      port:python27
    configure.args-delete   --disable-python-scripting \
                            --disable-python-extension
    configure.python        ${prefix}/bin/python2.7
    configure.pkg_config_path \
                            "${frameworks_dir}/Python.framework/Versions/2.7/lib/pkgconfig"
}

default_variants    +python27
