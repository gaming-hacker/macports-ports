# -*- coding: utf-8; mode: _tcl; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- vim:fenc=utf-8:ft=tcl:et:sw=2:ts=2:sts=2

PortSystem      1.0

name            lscsoft-deps
version         20180830
categories      science
maintainers     {ram @skymoo} {aronnax @lpsinger} {ligo.org:ed.maros @emaros}
platforms       darwin
supported_archs noarch

description     LSCSoft dependencies meta-port
long_description  This is a meta-port that depends on all the ports \
  needed for developing Software used within the LIGO Scientific \
  Collaboration.

homepage        http://www.lsc-group.phys.uwm.edu/daswg
master_sites    ${homepage}

distfiles

depends_run     port:autoconf \
                port:automake \
                path:bin/cmake:cmake \
                port:git \
                port:git-lfs \
                port:libtool \
                port:pkgconfig

build {}
destroot {
  xinstall -d ${destroot}${prefix}/share/doc/${name}-${version}
  system "echo ${long_description} > ${destroot}${prefix}/share/doc/${name}-${version}/README.txt"
}

variant glue description {Include dependencies for glue development} {
  depends_run-append port:py37-cjson \
                     port:py37-numpy \
                     port:py37-openssl \
                     port:py37-pyrxp
}

variant lalsuite requires glue description {Include dependencies for LALSuite development} {
  depends_run-append path:lib/pkgconfig/glib-2.0.pc:glib2 \
                     port:fftw-3 \
                     port:fftw-3-single \
                     port:gsl \
                     port:hdf5 \
                     port:healpix-c \
                     port:ldas-tools-framecpp \
                     port:libframe \
                     port:libxml2 \
                     port:metaio \
                     port:py37-astropy \
                     port:py37-h5py \
                     port:py37-healpy \
                     port:py37-ligo-segments \
                     port:py37-pytest \
                     port:py37-pytest-mpl \
                     port:py37-shapely \
                     port:swig \
                     port:swig-python
}

variant pylal requires glue lalsuite description {Include dependencies for pyLAL development} {
  depends_run-append port:py37-matplotlib \
                     port:py37-matplotlib-basemap \
                     port:py37-scipy \
}

#variant gstlal requires glue lalsuite pylal description {Include dependencies for gstlal development} {
#  depends_run-append port:gstreamer010 \
#                     port:gstreamer010-gst-plugins-base \
#                     port:gstreamer010-gst-plugins-good \
#                     port:orc \
#                     port:py37-gobject \
#                     port:py37-gst-python
#}

default_variants +glue +pylal +lalsuite

notes \
"To complete the installation and prepare your system for use, please run:
\n\tgit lfs install
\tsudo port select --set python python37"

use_configure   no

livecheck.type  none
